<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daggy Boutique Management System</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #e84393;
            --bg-color: #f4f7f6;
            --text-color: #333;
            --table-header: #dfe6e9;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
        }

        /* Header Styling */
        header {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            text-align: center;
            margin-bottom: 20px;
            border-top: 5px solid var(--accent-color);
        }

        h1 { margin: 0; color: var(--primary-color); letter-spacing: 2px; }
        .sub-header { font-size: 0.9em; color: #666; margin-top: 5px; line-height: 1.4; }
        .contact-info { font-weight: bold; color: var(--accent-color); margin-top: 10px; }

        /* Dashboard Cards */
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            text-align: center;
        }

        .card h3 { margin: 0 0 10px 0; font-size: 0.9em; color: #7f8c8d; }
        .card .value { font-size: 1.5em; font-weight: bold; color: var(--primary-color); }

        /* Tabs */
        .tab-container { margin-bottom: 15px; }
        .tab-button {
            padding: 10px 20px;
            background: #ddd;
            border: none;
            cursor: pointer;
            font-weight: bold;
            border-radius: 5px 5px 0 0;
        }
        .tab-button.active {
            background: var(--primary-color);
            color: white;
        }

        /* Tables */
        .section { display: none; background: white; padding: 20px; border-radius: 0 5px 5px 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .section.active { display: block; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 0.9em;
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        th { background-color: var(--table-header); color: var(--primary-color); }
        
        /* Inputs in tables */
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        input[type="number"] { text-align: right; }
        
        .readonly-input {
            background-color: #f8f9fa;
            border: none;
            font-weight: bold;
            color: var(--primary-color);
        }

        .delete-btn, .add-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            color: white;
        }

        .delete-btn { background-color: #e74c3c; }
        .add-btn { background-color: #27ae60; margin-top: 15px; padding: 10px 20px; font-size: 1em; }
        .save-note { font-size: 0.8em; color: green; margin-left: 10px; opacity: 0; transition: opacity 0.5s; }

        /* Balance Highlighting */
        .negative-balance { color: red; font-weight: bold; }
        .positive-balance { color: green; font-weight: bold; }

    </style>
</head>
<body>

<header>
    <h1>DAGGY BOTIQUE</h1>
    <div class="sub-header">
        MSAMBWENI ASSETS<br>
        LOCATED AT KILIMANI APARATURM BUSINESS CENTER ROOM NUMBER 10 BASEMENT<br>
        PO BOX 560-NAIROBI
    </div>
    <div class="contact-info">
        TEL: 0796669940 / 0701127311<br>
        MAIL: garidauglas@gmail.com
    </div>
</header>

<div class="dashboard">
    <div class="card">
        <h3>Total Stock Value</h3>
        <div class="value" id="grand-stock-total">0</div>
    </div>
    <div class="card">
        <h3>Total Expected Credit</h3>
        <div class="value" id="grand-credit-total">0</div>
    </div>
    <div class="card">
        <h3>Total Paid (Credits)</h3>
        <div class="value" id="grand-paid-total">0</div>
    </div>
    <div class="card">
        <h3>Outstanding Balances</h3>
        <div class="value" id="grand-balance-total">0</div>
    </div>
</div>

<div class="tab-container">
    <button class="tab-button active" onclick="showTab('inventory')">INVENTORY ITEMS</button>
    <button class="tab-button" onclick="showTab('credits')">CREDIT SHEET</button>
    <button class="tab-button" onclick="showTab('assets')">BANK & ASSETS</button>
</div>

<div id="inventory" class="section active">
    <h2>Stock Inventory</h2>
    <p><em>Edit numbers or prices. The 'Product' column calculates automatically (Qty * Price).</em></p>
    <table id="inventoryTable">
        <thead>
            <tr>
                <th style="width: 35%;">Item Name</th>
                <th style="width: 15%;">Quantity</th>
                <th style="width: 20%;">Unit Price</th>
                <th style="width: 20%;">Total Value</th>
                <th style="width: 10%;">Action</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>
    <button class="add-btn" onclick="addNewInventoryItem()">+ Add New Item</button>
    <span id="save-msg-inv" class="save-note">Saved!</span>
</div>

<div id="credits" class="section">
    <h2>Msambweni Credit Sheet</h2>
    <p><em>Track customer debts. Balance = Amount - Paid.</em></p>
    <table id="creditTable">
        <thead>
            <tr>
                <th style="width: 25%;">Customer Name</th>
                <th style="width: 15%;">Amount Due</th>
                <th style="width: 15%;">Amount Paid</th>
                <th style="width: 15%;">Balance</th>
                <th style="width: 20%;">Goods Description</th>
                <th style="width: 10%;">Action</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>
    <button class="add-btn" onclick="addNewCreditItem()">+ Add New Customer</button>
    <span id="save-msg-cred" class="save-note">Saved!</span>
</div>

<div id="assets" class="section">
    <h2>Financial Assets & Banking</h2>
    <p><em>Enter your current bank and asset values.</em></p>
    <table id="assetTable">
        <thead>
            <tr>
                <th>Account / Asset Name</th>
                <th>Value (KES)</th>
                <th>Notes</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>
    <button class="add-btn" onclick="addNewAsset()">+ Add Asset</button>
    <span id="save-msg-asset" class="save-note">Saved!</span>
    
    <div style="margin-top: 30px; padding: 15px; background: #eef; border-radius: 5px;">
        <h3>Financial Snapshot</h3>
        <p><strong>Inventory Total:</strong> <span id="snap-inventory">0</span></p>
        <p><strong>Assets Total:</strong> <span id="snap-assets">0</span></p>
        <p><strong>Grand Total (Inventory + Assets):</strong> <span id="snap-grand">0</span></p>
    </div>
</div>

<script>
    // --- INITIAL DATA (From User Prompt) ---
    const initialInventory = [
        {name: "2 PIECE BIG NUMBER + 3 PIECE", qty: 2, price: 1300},
        {name: "TOP, TROUSER", qty: 1, price: 1000},
        {name: "2 PIECE SHORT", qty: 2, price: 850},
        {name: "2 PIECE SUITE", qty: 2, price: 1500},
        {name: "2 PIECE TROUSER", qty: 2, price: 1200},
        {name: "3 PIECE SHORT", qty: 1, price: 1200},
        {name: "3 PIECE TROUZER+2 piece short", qty: 3, price: 1000},
        {name: "ADAPTER", qty: 1, price: 350},
        {name: "AIRFORCE 1", qty: 1, price: 2200},
        {name: "AIRFORCE RAISED", qty: 2, price: 1400},
        {name: "BLUETHOOT SPEAKER LINE 1", qty: 1, price: 1150},
        {name: "BLUETHOOT SPEAKER LINE 2", qty: 1, price: 1000},
        {name: "BEDSHEET", qty: 2, price: 1200},
        {name: "BELTS", qty: 1, price: 170},
        {name: "BELTS LEATHER", qty: 1, price: 450},
        {name: "BOXERS MEN", qty: 3, price: 600},
        {name: "BULB", qty: 2, price: 200},
        {name: "BURNERS ORIGINAL", qty: 3, price: 450},
        {name: "CABLES", qty: 7, price: 200},
        {name: "CHARGER SUMSUNG", qty: 1, price: 550},
        {name: "CHARGER", qty: 1, price: 300},
        {name: "CHARGER ORAIMO", qty: 3, price: 500},
        {name: "DENIM JACKETS", qty: 1, price: 1000},
        {name: "DENIM SKIRTS", qty: 1, price: 1350},
        {name: "DENIN SKIRT SHORT", qty: 3, price: 1000},
        {name: "DERA", qty: 2, price: 450},
        {name: "DOLL SHOES", qty: 7, price: 370},
        {name: "DOLL SHOES 3", qty: 1, price: 600},
        {name: "DOLL SHOES 4", qty: 4, price: 450},
        {name: "DRESS", qty: 16, price: 1000},
        {name: "DRESS LINE 1", qty: 1, price: 550},
        {name: "DRESS LINE 2", qty: 5, price: 850},
        {name: "EARPODS PRO", qty: 3, price: 600},
        {name: "EARPHONES", qty: 2, price: 200},
        {name: "EARPODS DOUBLE", qty: 2, price: 550},
        {name: "ELECTRIC PLATE", qty: 1, price: 1000},
        {name: "ELECTRICAL BLENDA", qty: 1, price: 2300},
        {name: "EXTENSION", qty: 5, price: 500},
        {name: "EXTENSION 2", qty: 2, price: 600},
        {name: "FAN LARGE", qty: 2, price: 2200},
        {name: "FAN MIN", qty: 2, price: 850},
        {name: "FLASH", qty: 1, price: 700},
        {name: "FLATS LINE 2", qty: 5, price: 450},
        {name: "FLATS NORMAL", qty: 18, price: 330},
        {name: "FLATS OPEN SHOES MEN", qty: 1, price: 750},
        {name: "FLATS OPEN SHOES MEN LINE 2", qty: 1, price: 500},
        {name: "HEADPHONES", qty: 1, price: 700},
        {name: "HEELS LINE 1", qty: 2, price: 1300},
        {name: "HEELS", qty: 2, price: 1400},
        {name: "HEELS LINE 3", qty: 3, price: 750},
        {name: "IRON BOX", qty: 2, price: 1000},
        {name: "J4 LINE 2", qty: 1, price: 1500},
        {name: "JEANS SHORT", qty: 1, price: 1000},
        {name: "JEANS HIPSTAR", qty: 2, price: 1100},
        {name: "JEANS LADIES", qty: 9, price: 900},
        {name: "JEANS MEN", qty: 8, price: 1000},
        {name: "JEANS MEN ADVANCE", qty: 2, price: 1100},
        {name: "JEANS COMPAT TROUZERS", qty: 7, price: 1300},
        {name: "LOAFERS", qty: 2, price: 1350},
        {name: "MULES LADIES", qty: 1, price: 550},
        {name: "MULES MEN", qty: 2, price: 1500},
        {name: "MEN SLIDES", qty: 1, price: 500},
        {name: "MEN VESTS", qty: 2, price: 600},
        {name: "MOSQUITO NET (ROUND)", qty: 1, price: 1100},
        {name: "NECKBAND", qty: 3, price: 500},
        {name: "MOSQUITO NET", qty: 1, price: 1400},
        {name: "PALLAZZO SHORTS", qty: 2, price: 400},
        {name: "PALLAZZO 2 PIECE", qty: 1, price: 850},
        {name: "PALLAZZO LINE 2", qty: 3, price: 450},
        {name: "PALLAZZO TROUSERS", qty: 2, price: 600},
        {name: "PANTIES SLIMLESS", qty: 7, price: 150},
        {name: "POWER BANK", qty: 1, price: 1400},
        {name: "RUBBERS LEORBARD", qty: 1, price: 1400},
        {name: "RED LIGHTS", qty: 0, price: 1000},
        {name: "SPORT NIKE", qty: 4, price: 1400},
        {name: "SHIRT NEW FASHION", qty: 2, price: 1000},
        {name: "SHIRTS MEN CLASSIC", qty: 1, price: 850},
        {name: "SHIRTS COTTON MEN", qty: 2, price: 600},
        {name: "SECOND HAND ITEMS", qty: 1, price: 3500},
        {name: "SHIVON TOPS", qty: 3, price: 300},
        {name: "SHORTS (MEN)", qty: 1, price: 250},
        {name: "SAMBA", qty: 1, price: 1200},
        {name: "SOCKS", qty: 2, price: 40},
        {name: "T-SHIRT LARGE", qty: 4, price: 550},
        {name: "TOP CROP", qty: 7, price: 450},
        {name: "T-SHIRT", qty: 3, price: 450},
        {name: "UMBRELLA", qty: 1, price: 550},
        {name: "WATCH SINGLE", qty: 2, price: 300},
        {name: "WATCH SINGLE ADVANCED", qty: 1, price: 500}
    ];

    const initialCredits = [
        {name: "MOUREEN", amount: 0, paid: 1400, desc: ""},
        {name: "CHESY", amount: 1200, paid: 1200, desc: ""},
        {name: "MACLEAN", amount: 850, paid: 0, desc: ""},
        {name: "DIANA", amount: 700, paid: 290, desc: "DRESS MAROON"},
        {name: "NEEMA SWALEH", amount: 850, paid: 850, desc: ""},
        {name: "VIVIANI MARSERA", amount: 0, paid: 1000, desc: "jamsuite black..."},
        {name: "LYDIAH", amount: 1000, paid: 500, desc: ""},
        {name: "BEATRICE LENTAAM", amount: 1400, paid: 1400, desc: ""},
        {name: "JONH", amount: 2100, paid: 1500, desc: ""},
        {name: "NURIA", amount: 850, paid: 500, desc: ""},
        {name: "GLORIA nentheya", amount: 1000, paid: 500, desc: ""},
        {name: "MAMAKE KIP", amount: 0, paid: 290, desc: ""},
        {name: "MUTHEU", amount: 2050, paid: 2300, desc: "brown dress,sweater pink"},
        {name: "GRACE", amount: 1350, paid: 850, desc: ""},
        {name: "BELINDA", amount: 3550, paid: 1850, desc: ""},
        {name: "SHARON CHEPNGETICH", amount: 2200, paid: 1900, desc: ""},
        {name: "DIANA (2)", amount: 1300, paid: 1100, desc: ""},
        {name: "LUTIFAH", amount: 850, paid: 300, desc: ""},
        {name: "HAPPINESS", amount: 1250, paid: 400, desc: ""},
        {name: "BEVERYLINE", amount: 3950, paid: 2600, desc: ""},
        {name: "BETTY", amount: 1180, paid: 330, desc: ""},
        {name: "JASMIME MASAKE", amount: 0, paid: 150, desc: ""},
        {name: "KIJANA SHOES", amount: 1800, paid: 0, desc: ""},
        {name: "ELIZABETH MWANZA", amount: 0, paid: 200, desc: ""},
        {name: "AMINA", amount: 1180, paid: 1050, desc: ""},
        {name: "AISHA", amount: 1650, paid: 1500, desc: ""},
        {name: "ALICE", amount: 2580, paid: 1600, desc: ""},
        {name: "EMMA", amount: 0, paid: 200, desc: ""},
        {name: "KWAMBOKA", amount: 1400, paid: 0, desc: ""},
        {name: "KIVUVA SALOON", amount: 1500, paid: 500, desc: ""},
        {name: "Sandra", amount: 700, paid: 1150, desc: ""},
        {name: "BRENDA", amount: 1000, paid: 500, desc: ""},
        {name: "MINAA", amount: 0, paid: 200, desc: ""},
        {name: "EASTHE", amount: 1200, paid: 0, desc: ""},
        {name: "MOUREEN (2)", amount: 0, paid: 300, desc: ""},
        {name: "JACINTA", amount: 600, paid: 100, desc: ""},
        {name: "MARRIUM", amount: 1200, paid: 500, desc: ""},
        {name: "SUBIRA", amount: 0, paid: 300, desc: ""},
        {name: "THUUM", amount: 0, paid: 470, desc: ""}
    ];

    const initialAssets = [
        {name: "EQUITY 1", value: 65000, notes: "52000 / 600000 Ref"},
        {name: "KCB 2", value: 70000, notes: "25278 Bal"},
        {name: "MPESA", value: 600000, notes: ""},
        {name: "CASH 1", value: 7400, notes: "24800 Ref"},
        {name: "ASSET 1", value: 430000, notes: "Combined Asset 1"},
        {name: "ASSET 2", value: 60000, notes: "Combined Asset 2"},
        {name: "ASSET 3", value: 42000, notes: ""},
        {name: "ASSET 4", value: 20000, notes: ""}
    ];

    // --- STATE MANAGEMENT ---
    let inventory = JSON.parse(localStorage.getItem('daggyInventory')) || initialInventory;
    let credits = JSON.parse(localStorage.getItem('daggyCredits')) || initialCredits;
    let assets = JSON.parse(localStorage.getItem('daggyAssets')) || initialAssets;

    // --- FUNCTIONS ---

    function saveData() {
        localStorage.setItem('daggyInventory', JSON.stringify(inventory));
        localStorage.setItem('daggyCredits', JSON.stringify(credits));
        localStorage.setItem('daggyAssets', JSON.stringify(assets));
        calculateAllTotals();
    }

    function showSaveMsg(id) {
        const el = document.getElementById(id);
        el.style.opacity = 1;
        setTimeout(() => el.style.opacity = 0, 1000);
    }

    function showTab(tabId) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        document.querySelector(`button[onclick="showTab('${tabId}')"]`).classList.add('active');
    }

    // --- INVENTORY LOGIC ---
    function renderInventory() {
        const tbody = document.querySelector('#inventoryTable tbody');
        tbody.innerHTML = '';
        inventory.forEach((item, index) => {
            const total = item.qty * item.price;
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><input type="text" value="${item.name}" oninput="updateInventory(${index}, 'name', this.value)"></td>
                <td><input type="number" value="${item.qty}" oninput="updateInventory(${index}, 'qty', this.value)"></td>
                <td><input type="number" value="${item.price}" oninput="updateInventory(${index}, 'price', this.value)"></td>
                <td><input class="readonly-input" type="text" value="${total.toLocaleString()}" readonly></td>
                <td><button class="delete-btn" onclick="deleteInventory(${index})">X</button></td>
            `;
            tbody.appendChild(tr);
        });
    }

    function updateInventory(index, field, value) {
        if(field === 'qty' || field === 'price') value = parseFloat(value) || 0;
        inventory[index][field] = value;
        saveData();
        renderInventory(); // Re-render to update the calculated Total column
        showSaveMsg('save-msg-inv');
    }

    function addNewInventoryItem() {
        inventory.push({name: "New Item", qty: 0, price: 0});
        saveData();
        renderInventory();
    }

    function deleteInventory(index) {
        if(confirm('Delete this item?')) {
            inventory.splice(index, 1);
            saveData();
            renderInventory();
        }
    }

    // --- CREDIT LOGIC ---
    function renderCredits() {
        const tbody = document.querySelector('#creditTable tbody');
        tbody.innerHTML = '';
        credits.forEach((item, index) => {
            const balance = item.amount - item.paid;
            const balClass = balance > 0 ? 'negative-balance' : (balance < 0 ? 'positive-balance' : '');
            
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><input type="text" value="${item.name}" oninput="updateCredit(${index}, 'name', this.value)"></td>
                <td><input type="number" value="${item.amount}" oninput="updateCredit(${index}, 'amount', this.value)"></td>
                <td><input type="number" value="${item.paid}" oninput="updateCredit(${index}, 'paid', this.value)"></td>
                <td><input class="readonly-input ${balClass}" type="text" value="${balance.toLocaleString()}" readonly></td>
                <td><input type="text" value="${item.desc}" oninput="updateCredit(${index}, 'desc', this.value)"></td>
                <td><button class="delete-btn" onclick="deleteCredit(${index})">X</button></td>
            `;
            tbody.appendChild(tr);
        });
    }

    function updateCredit(index, field, value) {
        if(field === 'amount' || field === 'paid') value = parseFloat(value) || 0;
        credits[index][field] = value;
        saveData();
        renderCredits();
        showSaveMsg('save-msg-cred');
    }

    function addNewCreditItem() {
        credits.push({name: "New Customer", amount: 0, paid: 0, desc: ""});
        saveData();
        renderCredits();
    }

    function deleteCredit(index) {
        if(confirm('Delete this customer entry?')) {
            credits.splice(index, 1);
            saveData();
            renderCredits();
        }
    }

    // --- ASSET LOGIC ---
    function renderAssets() {
        const tbody = document.querySelector('#assetTable tbody');
        tbody.innerHTML = '';
        assets.forEach((item, index) => {
            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td><input type="text" value="${item.name}" oninput="updateAsset(${index}, 'name', this.value)"></td>
                <td><input type="number" value="${item.value}" oninput="updateAsset(${index}, 'value', this.value)"></td>
                <td><input type="text" value="${item.notes}" oninput="updateAsset(${index}, 'notes', this.value)"></td>
                <td><button class="delete-btn" onclick="deleteAsset(${index})">X</button></td>
            `;
            tbody.appendChild(tr);
        });
    }

    function updateAsset(index, field, value) {
        if(field === 'value') value = parseFloat(value) || 0;
        assets[index][field] = value;
        saveData();
        showSaveMsg('save-msg-asset');
    }

    function addNewAsset() {
        assets.push({name: "New Asset", value: 0, notes: ""});
        saveData();
        renderAssets();
    }

    function deleteAsset(index) {
        if(confirm('Delete this asset?')) {
            assets.splice(index, 1);
            saveData();
            renderAssets();
        }
    }

    // --- CALCULATIONS ---
    function calculateAllTotals() {
        // Inventory
        let stockTotal = 0;
        inventory.forEach(i => stockTotal += (i.qty * i.price));
        document.getElementById('grand-stock-total').innerText = "KES " + stockTotal.toLocaleString();
        document.getElementById('snap-inventory').innerText = stockTotal.toLocaleString();

        // Credits
        let credTotal = 0;
        let paidTotal = 0;
        credits.forEach(c => {
            credTotal += c.amount;
            paidTotal += c.paid;
        });
        document.getElementById('grand-credit-total').innerText = "KES " + credTotal.toLocaleString();
        document.getElementById('grand-paid-total').innerText = "KES " + paidTotal.toLocaleString();
        document.getElementById('grand-balance-total').innerText = "KES " + (credTotal - paidTotal).toLocaleString();

        // Assets
        let assetTotal = 0;
        assets.forEach(a => assetTotal += a.value);
        document.getElementById('snap-assets').innerText = assetTotal.toLocaleString();

        // Grand
        document.getElementById('snap-grand').innerText = "KES " + (stockTotal + assetTotal).toLocaleString();
    }

    // --- INIT ---
    renderInventory();
    renderCredits();
    renderAssets();
    calculateAllTotals();

</script>

</body>
</html>
